@use "../abstracts/variables" as *;
@use "../abstracts/mixins" as *;

.users-page {
  // Page Title
  &__title {
    color: $text-color-primary;
    font-size: toRem(24);
    font-weight: 500;
    margin-bottom: toRem(40);
  }

  // Stats Grid
  &__stats {
    display: grid;
    grid-template-columns: repeat(1, 1fr); // Mobile
    gap: toRem(20);
    margin-bottom: toRem(40);

    @media (min-width: $breakpoint-tablet) {
      grid-template-columns: repeat(2, 1fr);
    }

    @media (min-width: 1200px) {
      // Desktop
      grid-template-columns: repeat(4, 1fr);
    }
  }

  // Stat Card
  &__stat-card {
    background: $color-white;
    border: 1px solid rgba($color-border, 0.06);
    box-shadow: 0px 2px 10px rgba(0, 0, 0, 0.04);
    border-radius: toRem(4);
    padding: toRem(30);
    display: flex;
    flex-direction: column;
    gap: toRem(10);
    transition: transform 0.2s;

    &:hover {
      transform: translateY(-5px);
    }

    &-icon {
      width: toRem(40);
      height: toRem(40);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: toRem(20);
      margin-bottom: toRem(5);

      &--pink {
        background-color: rgba(223, 24, 255, 0.1);
        color: #df18ff;
      }
      &--purple {
        background-color: rgba(87, 24, 255, 0.1);
        color: #5718ff;
      }
      &--orange {
        background-color: rgba(245, 95, 68, 0.1);
        color: #f55f44;
      }
      &--red {
        background-color: rgba(255, 51, 102, 0.1);
        color: #ff3366;
      }
    }

    &-label {
      font-size: toRem(14);
      color: $text-color-secondary;
      text-transform: uppercase;
      font-weight: 500;
    }

    &-value {
      font-size: toRem(24);
      color: $text-color-primary;
      font-weight: 600;
    }
  }

  // Table Container
  &__table-wrapper {
    background: $color-white;
    border: 1px solid rgba($color-border, 0.06);
    box-shadow: 0px 2px 10px rgba(0, 0, 0, 0.04);
    border-radius: toRem(4);
    padding: toRem(30);
    overflow-x: auto;
  }

  &__table {
    width: 100%;
    border-collapse: collapse;
    min-width: toRem(900); // Ensure table doesn't squish

    th {
      text-align: left;
      padding: toRem(16);
      font-size: toRem(12);
      color: $text-color-secondary;
      text-transform: uppercase;
      font-weight: 600;
      white-space: nowrap;

      .filter-icon {
        margin-left: toRem(8);
        cursor: pointer;
        vertical-align: middle;
      }
    }

    td {
      padding: toRem(20) toRem(16);
      font-size: toRem(14);
      color: $text-color-secondary;
      border-bottom: 1px solid rgba($color-border, 0.1);

      &:last-child {
        text-align: right;
      }
    }

    tr:last-child td {
      border-bottom: none;
    }
  }

  // Status Badges
  &__status {
    display: inline-block;
    padding: toRem(6) toRem(16);
    border-radius: toRem(100);
    font-size: toRem(12);
    font-weight: 500;
    text-transform: capitalize;

    &--active {
      background-color: rgba(57, 205, 108, 0.06);
      color: #39cdcc;
    }
    &--inactive {
      background-color: rgba(84, 95, 125, 0.06);
      color: #545f7d;
    }
    &--pending {
      background-color: rgba(233, 178, 0, 0.1);
      color: #e9b200;
    }
    &--blacklisted {
      background-color: rgba(228, 3, 59, 0.1);
      color: #e4033b;
    }
  }

  // Pagination
  &__pagination {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-top: toRem(20);
    flex-wrap: wrap;
    gap: toRem(20);

    &-info {
      display: flex;
      align-items: center;
      gap: toRem(10);
      font-size: toRem(14);
      color: $text-color-secondary;
    }

    &-select {
      background: rgba(33, 63, 125, 0.1);
      border-radius: toRem(4);
      padding: toRem(5) toRem(10);
      border: none;
      color: $text-color-primary;
      font-weight: 500;
      cursor: pointer;
      margin-right: toRem(10);
    }

    &-controls {
      display: flex;
      align-items: center;
      gap: toRem(10);
    }

    &-btn {
      width: toRem(30);
      height: toRem(30);
      display: flex;
      align-items: center;
      justify-content: center;
      border: none;
      background: transparent;
      color: $text-color-secondary;
      border-radius: toRem(4);
      cursor: pointer;
      font-size: toRem(14);
      font-weight: 500;

      &:hover:not(:disabled) {
        background-color: rgba($color-primary, 0.1);
      }

      &:disabled {
        opacity: 0.5;
        cursor: not-allowed;
      }

      &--active {
        color: $color-primary;
        font-weight: 700;
      }

      &--nav {
        background-color: rgba(33, 63, 125, 0.1);
        border-radius: toRem(4);
      }
    }
  }
  // Filter Popover Form container
  &__filter-form {
    background-color: $color-white;
    border: 1px solid rgba($color-border, 0.1);
    box-shadow: 0px 5px 20px rgba(0, 0, 0, 0.1);
    border-radius: toRem(4);
    padding: toRem(30);
    width: toRem(270);
    position: fixed; // Fixed relative to viewport for simplicity
    top: toRem(280); // Approximate position under table headers
    left: toRem(320); // Approximate position near first column
    z-index: 1050;

    display: flex;
    flex-direction: column;
    gap: toRem(20);
  }

  &__form-group {
    display: flex;
    flex-direction: column;
    gap: toRem(6);
  }

  &__label {
    font-size: toRem(14);
    font-weight: 500;
    color: $text-color-secondary;
  }

  &__input,
  &__select {
    padding: toRem(10);
    border: 1px solid rgba($color-border, 0.15);
    border-radius: toRem(8);
    font-size: toRem(14);
    color: $text-color-primary;
    font-family: inherit;
    outline: none;
    width: 100%;
    background-color: $color-white;

    &::placeholder {
      color: rgba($text-color-secondary, 0.6);
    }

    &:focus {
      border-color: $color-primary;
    }
  }

  &__actions {
    display: flex;
    gap: toRem(14);
    margin-top: toRem(10);
  }

  &__btn-reset {
    flex: 1;
    padding: toRem(10);
    background: transparent;
    border: 1px solid $color-secondary;
    color: $color-secondary;
    border-radius: toRem(8);
    font-weight: 600;
    cursor: pointer;
    font-size: toRem(14);

    &:hover {
      background-color: rgba($color-secondary, 0.05);
    }
  }

  &__btn-filter {
    flex: 1;
    padding: toRem(10);
    background: $color-primary;
    border: 1px solid $color-primary;
    color: white;
    border-radius: toRem(8);
    font-weight: 600;
    cursor: pointer;
    font-size: toRem(14);

    &:hover {
      background-color: darken($color-primary, 5%);
    }
  }

  // Action Menu (Kebab)
  &__action-cell {
    position: relative; // Anchor for absolute menu
  }

  &__menu {
    position: absolute;
    right: toRem(0);
    top: toRem(30); // Below button
    background: $color-white;
    min-width: toRem(180);
    box-shadow: 0px 5px 20px rgba(0, 0, 0, 0.1);
    border-radius: toRem(4);
    z-index: 100; // Above table rows
    padding: toRem(10) 0;
  }

  &__menu-item {
    display: flex;
    align-items: center;
    gap: toRem(10);
    padding: toRem(10) toRem(20);
    font-size: toRem(14);
    color: $text-color-secondary;
    cursor: pointer;
    transition: background-color 0.1s;
    width: 100%;
    border: none;
    background: none;
    text-align: left;
    text-decoration: none;

    &:hover {
      background-color: rgba($color-secondary, 0.05);
      color: $color-primary;
    }
  }

  // Backdrop to close menu when clicking outside
  &__backdrop {
    position: fixed;
    inset: 0;
    z-index: 99;
    background: transparent;
    cursor: default;
  }
}

.filter-icon {
  color: $text-color-secondary;
  font-size: toRem(20);
  cursor: pointer;
  vertical-align: middle;
}
